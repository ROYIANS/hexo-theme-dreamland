import{f as he,a7 as me,T as ne,bR as ye,q as M,bS as be,bT as ve,J as we,aE as le,M as H,aH as Fe,bU as se,z as ce,bV as q}from"./entry.e068cd25.js";function re(e){return be()?(ve(e),!0):!1}function X(){const e=new Set,t=r=>{e.delete(r)};return{on:r=>{e.add(r);const a=()=>t(r);return re(a),{off:a}},off:t,trigger:(...r)=>Promise.all(Array.from(e).map(a=>a(...r)))}}function T(e){return typeof e=="function"?e():he(e)}const fe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ge=Object.prototype.toString,Se=e=>ge.call(e)==="[object Object]",de=()=>{};function Te(e,t){function n(...o){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(a)})}return n}const pe=e=>e();function Oe(e=pe){const t=M(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...a)=>{t.value&&e(...a)};return{isActive:ne(t),pause:n,resume:o,eventFilter:r}}function ae(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function Ee(e,...t){return t.some(n=>n in e)}function Ae(e){return e||Fe()}function Y(...e){if(e.length!==1)return me(...e);const t=e[0];return typeof t=="function"?ne(ye(()=>({get:t,set:de}))):M(t)}function Ce(e,t,n={}){const{eventFilter:o=pe,...r}=n;return H(e,Te(o,t),r)}function Pe(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:a,pause:i,resume:w,isActive:d}=Oe(o);return{stop:Ce(e,t,{...r,eventFilter:a}),pause:i,resume:w,isActive:d}}function je(e,t=!0,n){const o=Ae(n);o?we(e,o):t?e():le(e)}function te(e,t=!1){function n(u,{flush:s="sync",deep:c=!1,timeout:m,throwOnTimeout:b}={}){let h=null;const S=[new Promise(O=>{h=H(e,E=>{u(E)!==t&&(h==null||h(),O(E))},{flush:s,deep:c,immediate:!0})})];return m!=null&&S.push(ae(m,b).then(()=>T(e)).finally(()=>h==null?void 0:h())),Promise.race(S)}function o(u,s){if(!se(u))return n(E=>E===u,s);const{flush:c="sync",deep:m=!1,timeout:b,throwOnTimeout:h}=s??{};let g=null;const O=[new Promise(E=>{g=H([e,u],([A,j])=>{t!==(A===j)&&(g==null||g(),E(A))},{flush:c,deep:m,immediate:!0})})];return b!=null&&O.push(ae(b,h).then(()=>T(e)).finally(()=>(g==null||g(),T(e)))),Promise.race(O)}function r(u){return n(s=>!!s,u)}function a(u){return o(null,u)}function i(u){return o(void 0,u)}function w(u){return n(Number.isNaN,u)}function d(u,s){return n(c=>{const m=Array.from(c);return m.includes(u)||m.includes(T(u))},s)}function f(u){return p(1,u)}function p(u=1,s){let c=-1;return n(()=>(c+=1,c>=u),s)}return Array.isArray(T(e))?{toMatch:n,toContains:d,changed:f,changedTimes:p,get not(){return te(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:a,toBeNaN:w,toBeUndefined:i,changed:f,changedTimes:p,get not(){return te(e,!t)}}}function De(e){return te(e)}function Ne(e,t,n={}){const{immediate:o=!0}=n,r=M(!1);let a=null;function i(){a&&(clearTimeout(a),a=null)}function w(){r.value=!1,i()}function d(...f){i(),r.value=!0,a=setTimeout(()=>{r.value=!1,a=null,e(...f)},T(t))}return o&&(r.value=!0,fe&&d()),re(w),{isPending:ne(r),start:d,stop:w}}function _e(e){var t;const n=T(e);return(t=n==null?void 0:n.$el)!=null?t:n}const G=fe?window:void 0;function ie(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=G):[t,n,o,r]=e,!t)return de;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],i=()=>{a.forEach(p=>p()),a.length=0},w=(p,u,s,c)=>(p.addEventListener(u,s,c),()=>p.removeEventListener(u,s,c)),d=H(()=>[_e(t),T(r)],([p,u])=>{if(i(),!p)return;const s=Se(u)?{...u}:u;a.push(...n.flatMap(c=>o.map(m=>w(p,c,m,s))))},{immediate:!0,flush:"post"}),f=()=>{d(),i()};return re(f),f}const R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k="__vueuse_ssr_handlers__",Me=Ue();function Ue(){return k in R||(R[k]=R[k]||{}),R[k]}function We(e,t){return Me[e]||t}function Be(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ze={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},ue="vueuse-storage";function He(e,t,n,o={}){var r;const{flush:a="pre",deep:i=!0,listenToStorageChanges:w=!0,writeDefaults:d=!0,mergeDefaults:f=!1,shallow:p,window:u=G,eventFilter:s,onError:c=l=>{console.error(l)},initOnMounted:m}=o,b=(p?q:M)(typeof t=="function"?t():t);if(!n)try{n=We("getDefaultStorage",()=>{var l;return(l=G)==null?void 0:l.localStorage})()}catch(l){c(l)}if(!n)return b;const h=T(t),g=Be(h),S=(r=o.serializer)!=null?r:ze[g],{pause:O,resume:E}=Pe(b,()=>A(b.value),{flush:a,deep:i,eventFilter:s});return u&&w&&je(()=>{ie(u,"storage",D),ie(u,ue,J),m&&D()}),m||D(),b;function A(l){try{if(l==null)n.removeItem(e);else{const y=S.write(l),C=n.getItem(e);C!==y&&(n.setItem(e,y),u&&u.dispatchEvent(new CustomEvent(ue,{detail:{key:e,oldValue:C,newValue:y,storageArea:n}})))}}catch(y){c(y)}}function j(l){const y=l?l.newValue:n.getItem(e);if(y==null)return d&&h!=null&&n.setItem(e,S.write(h)),h;if(!l&&f){const C=S.read(y);return typeof f=="function"?f(C,h):g==="object"&&!Array.isArray(C)?{...h,...C}:C}else return typeof y!="string"?y:S.read(y)}function J(l){D(l.detail)}function D(l){if(!(l&&l.storageArea!==n)){if(l&&l.key==null){b.value=h;return}if(!(l&&l.key!==e)){O();try{(l==null?void 0:l.newValue)!==S.write(b.value)&&(b.value=j(l))}catch(y){c(y)}finally{l?le(E):E()}}}}}const Je={json:"application/json",text:"text/plain"};function K(e){return e&&Ee(e,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}function xe(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $(e){return typeof Headers<"u"&&e instanceof Headers?Object.fromEntries([...e.entries()]):e}function z(e,...t){return e==="overwrite"?async n=>{const o=t[t.length-1];return o?{...n,...await o(n)}:n}:async n=>{for(const o of t)o&&(n={...n,...await o(n)});return n}}function Ge(e={}){const t=e.combination||"chain",n=e.options||{},o=e.fetchOptions||{};function r(a,...i){const w=ce(()=>{const p=T(e.baseUrl),u=T(a);return p&&!xe(u)?Ve(p,u):u});let d=n,f=o;return i.length>0&&(K(i[0])?d={...d,...i[0],beforeFetch:z(t,n.beforeFetch,i[0].beforeFetch),afterFetch:z(t,n.afterFetch,i[0].afterFetch),onFetchError:z(t,n.onFetchError,i[0].onFetchError)}:f={...f,...i[0],headers:{...$(f.headers)||{},...$(i[0].headers)||{}}}),i.length>1&&K(i[1])&&(d={...d,...i[1],beforeFetch:z(t,n.beforeFetch,i[1].beforeFetch),afterFetch:z(t,n.afterFetch,i[1].afterFetch),onFetchError:z(t,n.onFetchError,i[1].onFetchError)}),Le(w,f,d)}return r}function Le(e,...t){var n;const o=typeof AbortController=="function";let r={},a={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const i={method:"GET",type:"text",payload:void 0};t.length>0&&(K(t[0])?a={...a,...t[0]}:r=t[0]),t.length>1&&K(t[1])&&(a={...a,...t[1]});const{fetch:w=(n=G)==null?void 0:n.fetch,initialData:d,timeout:f}=a,p=X(),u=X(),s=X(),c=M(!1),m=M(!1),b=M(!1),h=M(null),g=q(null),S=q(null),O=q(d||null),E=ce(()=>o&&m.value);let A,j;const J=()=>{o&&(A==null||A.abort(),A=new AbortController,A.signal.onabort=()=>b.value=!0,r={...r,signal:A.signal})},D=F=>{m.value=F,c.value=!F};f&&(j=Ne(J,f,{immediate:!1}));let l=0;const y=async(F=!1)=>{var P,N;J(),D(!0),S.value=null,h.value=null,b.value=!1,l+=1;const L=l,W={method:i.method,headers:{}};if(i.payload){const v=$(W.headers),_=T(i.payload);!i.payloadType&&_&&Object.getPrototypeOf(_)===Object.prototype&&!(_ instanceof FormData)&&(i.payloadType="json"),i.payloadType&&(v["Content-Type"]=(P=Je[i.payloadType])!=null?P:i.payloadType),W.body=i.payloadType==="json"?JSON.stringify(_):_}let oe=!1;const V={url:T(e),options:{...W,...r},cancel:()=>{oe=!0}};if(a.beforeFetch&&Object.assign(V,await a.beforeFetch(V)),oe||!w)return D(!1),Promise.resolve(null);let B=null;return j&&j.start(),w(V.url,{...W,...V.options,headers:{...$(W.headers),...$((N=V.options)==null?void 0:N.headers)}}).then(async v=>{if(g.value=v,h.value=v.status,B=await v.clone()[i.type](),!v.ok)throw O.value=d||null,new Error(v.statusText);return a.afterFetch&&({data:B}=await a.afterFetch({data:B,response:v})),O.value=B,p.trigger(v),v}).catch(async v=>{let _=v.message||v.name;if(a.onFetchError&&({error:_,data:B}=await a.onFetchError({data:B,error:v,response:g.value})),S.value=_,a.updateDataOnError&&(O.value=B),u.trigger(v),F)throw v;return null}).finally(()=>{L===l&&D(!1),j&&j.stop(),s.trigger(null)})},C=Y(a.refetch);H([C,Y(e)],([F])=>F&&y(),{deep:!0});const I={isFinished:c,statusCode:h,response:g,error:S,data:O,isFetching:m,canAbort:E,aborted:b,abort:J,execute:y,onFetchResponse:p.on,onFetchError:u.on,onFetchFinally:s.on,get:U("GET"),put:U("PUT"),post:U("POST"),delete:U("DELETE"),patch:U("PATCH"),head:U("HEAD"),options:U("OPTIONS"),json:x("json"),text:x("text"),blob:x("blob"),arrayBuffer:x("arrayBuffer"),formData:x("formData")};function U(F){return(P,N)=>{if(!m.value)return i.method=F,i.payload=P,i.payloadType=N,se(i.payload)&&H([C,Y(i.payload)],([L])=>L&&y(),{deep:!0}),{...I,then(L,W){return Q().then(L,W)}}}}function Q(){return new Promise((F,P)=>{De(c).toBe(!0).then(()=>F(I)).catch(N=>P(N))})}function x(F){return()=>{if(!m.value)return i.type=F,{...I,then(P,N){return Q().then(P,N)}}}}return a.immediate&&Promise.resolve().then(()=>y()),{...I,then(F,P){return Q().then(F,P)}}}function Ve(e,t){return!e.endsWith("/")&&!t.startsWith("/")?`${e}/${t}`:`${e}${t}`}function Z(e,t,n={}){const{window:o=G}=n;return He(e,t,o==null?void 0:o.localStorage,n)}const ee={token:"",userInfo:{username:"",avatar:""},theme:"default",darkMode:!1};function Ie(){function e(r){return Z(r,ee[r]).value}function t(r,a){Z(r,ee[r]).value=a}function n(r){Z(r,ee[r]).value=null}function o(){localStorage.clear()}return{getCache:e,setCache:t,removeCache:n,clearCache:o}}export{Ge as c,Ie as u};
